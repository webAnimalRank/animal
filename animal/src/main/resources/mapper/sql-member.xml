<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="com.example.animal.mapper.MemberMapper">
	<!-- <resultMap id="MemberResultMap" type="com.example.animal.dto.MemberDto">
    <id property="member_no" column="member_no"/>
    <result property="member_id" column="member_id"/>
    <result property="member_pw" column="member_pw"/>
    <result property="member_name" column="member_name"/>
    <result property="member_email" column="member_email"/>
    <result property="isactive" column="isactive"/>
    <result property="create_date" column="create_date"/>
    <result property="update_date" column="update_date"/>
	</resultMap> -->

	<!-- 회원 전체 조회 -->
	<select id="allMemberList" resultType="com.example.animal.dto.MemberDto">
    SELECT * FROM member WHERE isactive = 1 ORDER BY member_no DESC
	</select>

    <!-- 회원 단건 조회 -->
    <select id="selectMemberByNo" resultType="com.example.animal.dto.MemberDto">
        SELECT
            member_no,
            member_id,
            member_pw,
            member_name,
            member_email,
            isactive,
            create_date,
            update_date
        FROM member
        WHERE member_no = #{memberNo}
    </select>

    <!-- 회원 등록 -->
    <insert id="insertMember">
        INSERT INTO member (
            member_id,
            member_pw,
            member_name,
            member_email,
            isactive,
            create_date
        ) VALUES (
            #{memberId},
            #{memberPw},
            #{memberName},
            #{memberEmail},
            1,
            NOW()
        )
    </insert>

    <!-- 회원 수정 -->
    <update id="updateMember">
        UPDATE member
        SET
            member_name = #{memberName},
            member_email = #{memberEmail},
            update_date = NOW()
        WHERE member_no = #{memberNo}
    </update>

    <!-- 회원 삭제 (논리 삭제) -->
    <update id="deleteMember">
        UPDATE member
        SET
            isactive = 0,
            update_date = NOW()
        WHERE member_no = #{memberNo}
    </update>

    <!-- 로그인 -->
    <select id="findByMemberId" resultType="com.example.animal.dto.MemberDto">
    SELECT *
    FROM member
    WHERE member_id = #{memberId}
    </select>


</mapper>
